@page 
@model FlightFinder.Pages.FlightsModel
@{
    ViewData["Title"] = "Flights";
}

<head>
    <title>Flights</title>
    <link rel="stylesheet" type="text/css" href="~/css/flights.css">
    <link rel="stylesheet" type="text/css" href="~/css/notification.css">
</head>

<body>
    <div class="search">
        <form id="search" method="post" onsubmit="return true">
            <div class="first-element">
                <div class="from">
                    <b class="text-from">From</b>
                    <img class="search-icon" src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDU2Ljk2NiA1Ni45NjYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDU2Ljk2NiA1Ni45NjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KPHBhdGggZD0iTTU1LjE0Niw1MS44ODdMNDEuNTg4LDM3Ljc4NmMzLjQ4Ni00LjE0NCw1LjM5Ni05LjM1OCw1LjM5Ni0xNC43ODZjMC0xMi42ODItMTAuMzE4LTIzLTIzLTIzcy0yMywxMC4zMTgtMjMsMjMgIHMxMC4zMTgsMjMsMjMsMjNjNC43NjEsMCw5LjI5OC0xLjQzNiwxMy4xNzctNC4xNjJsMTMuNjYxLDE0LjIwOGMwLjU3MSwwLjU5MywxLjMzOSwwLjkyLDIuMTYyLDAuOTIgIGMwLjc3OSwwLDEuNTE4LTAuMjk3LDIuMDc5LTAuODM3QzU2LjI1NSw1NC45ODIsNTYuMjkzLDUzLjA4LDU1LjE0Niw1MS44ODd6IE0yMy45ODQsNmM5LjM3NCwwLDE3LDcuNjI2LDE3LDE3cy03LjYyNiwxNy0xNywxNyAgcy0xNy03LjYyNi0xNy0xN1MxNC42MSw2LDIzLjk4NCw2eiIgZmlsbD0iIzAwMDAwMCIvPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K" />
                    <input type="text" asp-for="From_TextBox" placeholder="Airport, City or County">
                </div>
                <br />
                <div class="to">
                    <b class="text-to">To</b>
                    <img class="search-icon" src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTkuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDU2Ljk2NiA1Ni45NjYiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDU2Ljk2NiA1Ni45NjY7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KPHBhdGggZD0iTTU1LjE0Niw1MS44ODdMNDEuNTg4LDM3Ljc4NmMzLjQ4Ni00LjE0NCw1LjM5Ni05LjM1OCw1LjM5Ni0xNC43ODZjMC0xMi42ODItMTAuMzE4LTIzLTIzLTIzcy0yMywxMC4zMTgtMjMsMjMgIHMxMC4zMTgsMjMsMjMsMjNjNC43NjEsMCw5LjI5OC0xLjQzNiwxMy4xNzctNC4xNjJsMTMuNjYxLDE0LjIwOGMwLjU3MSwwLjU5MywxLjMzOSwwLjkyLDIuMTYyLDAuOTIgIGMwLjc3OSwwLDEuNTE4LTAuMjk3LDIuMDc5LTAuODM3QzU2LjI1NSw1NC45ODIsNTYuMjkzLDUzLjA4LDU1LjE0Niw1MS44ODd6IE0yMy45ODQsNmM5LjM3NCwwLDE3LDcuNjI2LDE3LDE3cy03LjYyNiwxNy0xNywxNyAgcy0xNy03LjYyNi0xNy0xN1MxNC42MSw2LDIzLjk4NCw2eiIgZmlsbD0iIzAwMDAwMCIvPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K" />
                    <input type="text" asp-for="To_TextBox" placeholder="Airport, City or County">
                </div>
            </div>
            <div class="second-element">
                <div class="depart-date">
                    <b class="text-depart">Departure</b>
                    <img class="calendar-icon" src="~/css/images/calender.png" />
                    <input type="date" asp-for="DepartDate_TextBox" placeholder="MM/DD/YYYY">
                </div>
                <br />
                <div class="airline-element">
                    <b class="text-airline">Airline</b>
                    <img class="airline-icon" src="~/css/images/airline.png" />
                    <input type="text" asp-for="Airline_TextBox" placeholder="Airline" />
                </div>
            </div>
            <div class="third-element">
                <div class="depart-time-element">
                    <b class="text-depart-time">Departure Time</b>
                    <img class="time-icon" src="~/css/images/time.png" />
                    <input type="time" asp-for="Depart_Time_TextBox" />
                </div>
                <br />
                <div class="arrival-time-element">
                    <b class="text-arrival-time">Arrival Time</b>
                    <img class="time-icon" src="~/css/images/time.png" />
                    <input type="time" asp-for="Arrival_Time_TextBox" />
                </div>
            </div>
            <div class="fourth-element">
                <div class="reg-num-element">
                    <b class="text-reg-num">Registration #</b>
                    <img class="time-icon" src="~/css/images/registration.icon.png" />
                    <input type="text" asp-for="Registration_Num_TextBox" />
                </div>
                <br />
                <div class="aircraft-type-element">
                    <b class="text-aircraft-type">Aircraft Type</b>
                    <input type="text" asp-for="AircraftType_TextBox" />
                </div>
            </div>
            <div>
                <button class="btn btn-success" name="submit" type="submit" value="F">Filter</button>
            </div>
        </form>
    </div>

    <table class="flight-list-table">
        <thead class="thead">
            <tr>
                <th scope="col">Departure City</th>
                <th scope="col">&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp</th>
                <th scope="col">Arrival City</th>
                <th scope="col">Flight Date</th>
                <th scope="col">Departure Time</th>
                <th scope="col">Arrival Time</th>
                <th scope="col">Estimated Flight Time</th>
                <th scope="col">Airline Name</th>
                <th scope="col">Registration Number</th>
                <th scope="col">Aircraft Type</th>
                <th scope="col">Flight Distance</th>
                <th scope="col">Total Seats</th>
                <th scope="col">Open Seats</th>
                <th scope="col">Save Flight</th>
                <th scope="col">Book Flight</th>
            </tr>
        </thead>
        <tbody>
            @for (int i = 0; i < @Model.TableSize; ++i) {
                <tr>
                    <td scope="row"><div class="departure-city-table">@Html.DisplayFor(m => m.Departure_Airport[i])</div>@Html.DisplayFor(m => m.Departure_City[i])</td>
                    <td><img class="go-to" src="~/css/images/arrow.png" /> </td>
                    <td><div class="arrival-city-table">@Html.DisplayFor(m => m.Arrival_Airport[i])</div>@Html.DisplayFor(m => m.Arrival_City[i])</td>
                    <td>@Html.DisplayFor(m => m.Flight_Date[i])</td>
                    <td><div class="arrival-departure-time-table">@Html.DisplayFor(m => m.Departure_Time[i])</div></td>
                    <td><div class="arrival-departure-time-table">@Html.DisplayFor(m => m.Arrival_Time[i])</div></td>
                    <td>@Html.DisplayFor(m => m.E_Flight_Time[i])</td>
                    <td>@Html.DisplayFor(m => m.Airline_Name[i])</td>
                    <td>@Html.DisplayFor(m => m.Aircraft_Reg_Num[i])</td>
                    <td>@Html.DisplayFor(m => m.Aircraft_Type[i])</td>
                    <td>@Html.DisplayFor(m => m.Flight_Distance[i])</td>
                    <td>@Html.DisplayFor(m => m.Total_Seats[i])</td>
                    <td>@Html.DisplayFor(m => m.Open_Seats[i])</td>
                    <td>
                        <form id="save-flight" method="post">
                            <button class="btn btn-info" name="submit" type="submit" value="S$@Model.Flight_ID[i]" onclick="Notification.show(@Model.ConfigureNotification(@Model.Flight_ID[i], "Save"))">Save</button>
                        </form>
                    </td>
                    <td>
                        <form id="save-flight" method="post">
                            <button class="btn btn-primary" name="submit" type="submit" value="B$@Model.Flight_ID[i]" onclick="Notification.show(@Model.ConfigureNotification(@Model.Flight_ID[i], "Book"))">Book</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <script>
        const Notification = {
            init() {
                this.hideTimeout = null;

                this.el = document.createElement('div');
                this.el.className = 'notification';
                document.body.appendChild(this.el);
            },

            show(message, state) {
                clearTimeout(this.hideTimeout);

                this.el.textContent = message;
                this.el.className = 'notification notification--visible';

                if (state) {
                    this.el.classList.add(`notification--${state}`)
                }

                this.hideTimeout = setTimeout(() => {
                    this.el.classList.remove('notification--visible');
                }, 3000);
            }
        };

        document.addEventListener('DOMContentLoaded', () => Notification.init());
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function (event) {
            var scrollpos = localStorage.getItem('scrollpos');
            if (scrollpos) window.scrollTo(0, scrollpos);
        });

        window.onbeforeunload = function (e) {
            localStorage.setItem('scrollpos', window.scrollY);
        };
    </script>
</body>